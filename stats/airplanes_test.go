package stats

import "testing"

func TestUnmarshalAirplanes(t *testing.T) {
	example := []byte(`{ "now" : 1617502620.6, "messages" : 43490633, "aircraft" : [ {"hex":"ad273b","alt_baro":34575,"lat":40.145207,"lon":-74.572012,"nic":8,"rc":186,"seen_pos":38.3,"version":0,"nac_p":8,"sil":2,"sil_type":"unknown","mlat":[],"tisb":[],"messages":12,"seen":26.8,"rssi":-10.2}, {"hex":"a8ebe7","version":0,"sil_type":"unknown","mlat":[],"tisb":[],"messages":9,"seen":133.7,"rssi":-12.4}, {"hex":"06a0e8","alt_baro":27400,"alt_geom":27050,"gs":461.1,"track":45.9,"baro_rate":768,"category":"A5","nav_qnh":1013.6,"nav_altitude_mcp":36992,"nav_heading":54.1,"version":0,"nic_baro":1,"nac_p":9,"nac_v":2,"sil":3,"sil_type":"unknown","mlat":[],"tisb":[],"messages":86,"seen":0.1,"rssi":-8.8}, {"hex":"a0fe19","alt_baro":43000,"alt_geom":42500,"gs":444.3,"track":326.4,"baro_rate":-64,"squawk":"1423","emergency":"none","category":"A2","lat":41.876391,"lon":-73.016031,"nic":8,"rc":186,"seen_pos":15.4,"version":2,"nic_baro":1,"nac_p":10,"nac_v":1,"sil":3,"sil_type":"perhour","gva":2,"sda":2,"mlat":[],"tisb":[],"messages":472,"seen":0.2,"rssi":-6.6}, {"hex":"a48315","flight":"DAL2267 ","alt_baro":41000,"alt_geom":40650,"gs":477.4,"track":92.4,"baro_rate":0,"category":"A3","nav_qnh":1013.6,"nav_altitude_mcp":6016,"nav_heading":102.0,"lat":42.716752,"lon":-73.587895,"nic":8,"rc":186,"seen_pos":11.5,"version":2,"nic_baro":1,"nac_p":10,"nac_v":1,"sil":3,"sil_type":"perhour","gva":2,"sda":2,"mlat":[],"tisb":[],"messages":151,"seen":5.4,"rssi":-7.3}, {"hex":"a2af3e","flight":"EDV5206 ","alt_baro":21100,"alt_geom":20950,"gs":429.5,"track":98.3,"geom_rate":-1408,"category":"A3","nav_qnh":1012.8,"nav_altitude_mcp":19008,"nav_heading":104.8,"version":2,"nic_baro":1,"nac_p":10,"nac_v":1,"sil":3,"sil_type":"perhour","mlat":[],"tisb":[],"messages":73,"seen":2.1,"rssi":-9.4}, {"hex":"a64c88","alt_baro":29000,"alt_geom":28575,"gs":433.8,"track":12.8,"geom_rate":0,"squawk":"7155","emergency":"none","category":"A2","nav_qnh":1012.8,"nav_altitude_mcp":28992,"lat":41.707826,"lon":-74.127183,"nic":8,"rc":186,"seen_pos":4.4,"version":2,"nic_baro":1,"nac_p":10,"nac_v":1,"sil":3,"sil_type":"perhour","gva":2,"sda":2,"mlat":[],"tisb":[],"messages":1067,"seen":1.6,"rssi":-2.0}, {"hex":"4caa41","flight":"EIN9078 ","alt_baro":39000,"alt_geom":38650,"gs":479.4,"track":48.0,"baro_rate":0,"squawk":"3107","emergency":"none","category":"A5","nav_qnh":1012.8,"nav_altitude_mcp":39008,"lat":41.040298,"lon":-73.213135,"nic":8,"rc":186,"seen_pos":39.3,"version":2,"nic_baro":1,"nac_p":9,"nac_v":1,"sil":3,"sil_type":"perhour","mlat":[],"tisb":[],"messages":858,"seen":5.3,"rssi":-5.8}, {"hex":"a6b4f7","version":2,"sil_type":"perhour","mlat":[],"tisb":[],"messages":476,"seen":144.6,"rssi":-10.2}, {"hex":"a4dc9e","version":2,"sil_type":"perhour","mlat":[],"tisb":[],"messages":218,"seen":206.4,"rssi":-11.0}, {"hex":"a8ae2e","category":"A2","version":2,"sil_type":"perhour","mlat":[],"tisb":[],"messages":3123,"seen":107.9,"rssi":-9.8} ] }`)
	if _, err := unmarshalAirplanes(example); err != nil {
		t.Errorf("expected no error, got %+v", err)
	}
}
